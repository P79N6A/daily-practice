# 复数
复用复数，任何一个二次方程都可以有两个根（可认为(x-a)^2 的复根 a 为两个根）。

## 一、基础
-1 的平方根，称之为 i。即有 ```i^2 = -1```。
i 不是 -1 唯一的平方根， -i 也是 -1 的平方根，即：
```
(-i)^2 = (-1)^2 * i^2 = 1*(-1) = -1
```
虚数的唯一的形式为 y*i，其中 y 是不为 0 的实数。

全体复数的集合通常用符号 ℂ 来表示。
若 z = x + i*y，则实数是 x，虚部是 y，分别写作 Re(z) 和 Im(z)。

#### ◉ 1 运算法则

1. 加减法： 实部相加（或相减），然后再处理虚部
2. 乘法：只需展开，但要记住每次见到 i^2 时都要把它换成 -1（i 的多次项分别在 1、i、-1、i 中循环）
3. 除法：
    1. 共轭复数：表示为 ż。
    2. 模：对于复数 z = x + i*y，定义 z 的模为 sqrt(x^2+y^2)。将 z 的模写作 |z|，则
    ```
    |x + i*y| = sqrt(x^2+y^2)
    ```
    3. 那么，复数与它的共轭复数的乘积是模的平方：
    ```
    z * ż = |z|^2
    ```
你要做的就是上下同乘分母部分的共轭复数，然后展开。新的分母是原分母模的平方。

二次方程的公式解：
```
x = (-b ± sqrt(b^2-4*a*c)) / (2*a)

复数根：
x = -b/(2*a) ± i*sqrt(b^2-4*a*c)/(2*a)
```

#### ◉ 2 复指数函数
对任意复数 z，有等式：
```
e^z = ∑[n=0,∞] z^n/n!
```
同时满足指数法则：
```
e^z * e^w = e^(z+w) 对任意两个复数 z 和 w 成立
```

## 二、复平面
复平面就是将复数 ```z=x+i*y``` 在笛卡尔坐标系下的 (x,y) 表示。

如果有复平面内极坐标为 (r,Θ) 的点，那么可用 ```x=r*cos(Θ)``` 和 ```y=r*sin(Θ)``` 来转换到笛卡尔坐标系。所以极坐标 (r,Θ) 表示复数 ```z = x+i*y = r*cos(Θ)+i*r*sin(Θ)```。特别的，当 r=1 时，则 ```z=cos(Θ)+i*sin(Θ)```。

#### ◉ 1 欧拉公式
```
e^(i*Θ) = cos(Θ) + i*sin(Θ)
```
对所有实数都成立。意思是，按前一节定义复数 e^(i*Θ)，当在复平面上画该点时有极坐标 (1,Θ)。所以 e^(i*Θ) 在单位圆上且有从 x 轴正方向开始的角 Θ。

#### ◉ 2 复数的坐标系转换
z 由极坐标系下的点 (r,Θ) 表示，则 ```z=r*cos(Θ)+i*r*sin(Θ)```，由欧拉公式，得 ```z = r*e^(i*Θ)```，故证得：
```
若 (x,y) 和 (r,Θ) 为相同的点，则 x+i*y = r*e^(i*Θ)
其中，```e^(i*Θ)``` 关于 Θ 是**周期**的，且周期为 2π。
```
转换方法：

1. 极坐标 ⟹ 笛卡尔坐标：
```
x = r * cos(Θ)
y = r * sin(Θ)
```
2. 笛卡尔坐标 ⟹ 极坐标：
    1. 由 ```r^2=x^2+y^2 和 tan(Θ)=y/x```，其中舍去了 ```r = -sqrt(x^2+y^2)```，需要复数的 r >= 0。
    2. 我们还定义了 z 的模为 ```|z| = sqrt(x^2+y^2)```，所以 r 等于 |z|。因此模 |z| 是从原点到点 z 的距离（在复平面中），角 Θ 被称为 z 的幅角，写为 arg(z)（通常要求 0 <= arg(z) < 2π）。
    3. 前式算出 r (即|z|) 和 Θ（根据tan(Θ)=y/x 和 坐标点象限估算），结合 ```z = r*e^(i*Θ)``` 来得出复数的极坐标。

## 三、复数的高次幂
使用极坐标形式的原因： 比较容易进行**乘法和取幂运算**。

总结：
1. 若取复数的高次幂，首先将它转化为极坐标形式，然后取幂。
2. 求小于 Θ 的 π 的最大偶数倍，然后从 Θ 中减去这个偶数倍，且用所得新数来代换 Θ。
3. 最后，换回笛卡尔形式。

## 四、解 z^n = w
在方程 ```z^n = w``` 中，n 是整数，w 为复数。

**一个原理：**
```
若 e^(i*A) = e^(i*B) 对任意实数 A 和 B 成立，则 A = B + 2*π*k， 其中 k 是整数
```

解 ```z^n = w``` 的主要步骤：

1. 将 z = r*e^(i*Θ) 写成极坐标。则 z^n = r^n*e^(i*n*Θ)
2. 将 w 转化为极坐标。我们设 w = R*e^(i*𝜙)
3. 由于 z^n = w，我们可以将原方程写成 r^n*e^(i*n*Θ) = R*e^(i*𝜙)。这里 n、R 和 𝜙 的值应当用已知值填入，但 r 和 Θ 总是我们要求的（所以它们作为变量出现）
4. 分成两个方程：r^n = R 和 e^(i*n*Θ) = e^(i*𝜙)
5. 第一个容易求解：取 n 次方根可得 r = R^(1/n)
6. 对第二个运用前面三条框中的原理可得 n*Θ = 𝜙+2*π*k，其中 k 是一个整数
7. 用 n 除这个结果，然后写出当 k = 0,1,2,...,n,n+1 时的所有不同 Θ 值
8. 将 r 值和不同的 Θ 值代入 z = r*e^(i*Θ) 得到 n 个不同的 z 值，即为解
9. 若有必要，将每个解转换为笛卡尔坐标形式

## 五、解 e^z = w
因为 ```z = x + i*y```，可得
```
e^z = e^(x+i*y) = e^x * e^(i*y)
```
以上为极坐标形式，**模** 为 e^x，**幅角** 为 y（也可写成 r=e^x，Θ=y）。

## 六、一些三角级数
结合欧拉公式```e^(i*Θ) = cos(Θ)+i*sin(Θ)``` 和 复指数函数公式```e^z = ∑[n=0,∞] z^n/n!```，可推算出几个等式：
```
∑[n=0,∞] cos(n*Θ)/n! = e^(cos(Θ))*cos(sin(Θ))
∑[n=0,∞] sin(n*Θ)/n! = e^(cos(Θ))*sin(sin(Θ))

∑[n=0,∞] cos(n*Θ)/3^n = (9-3*cos(Θ))/(10-*6cos(Θ))
∑[n=0,∞] sin(n*Θ)/3^n = 3*sin(Θ)/(10-*6cos(Θ))
```

## 七、欧拉恒等式和幂级数
```
e^(i*Θ) = cos(Θ) + i*sin(Θ)
```
根据 28.1.1 节对 e^z 的定义，将 z 替换为 i*Θ，可得：
```
e^(i*Θ) = 1 + (i*Θ) + (i*Θ)^2/2! + (i*Θ)^3/3! + (i*Θ)^4/4! + (i*Θ)^5/5! + ...
        = 1 + i*Θ - Θ^2/2! - i*Θ^3/3! + Θ^4/4! + i*Θ^5/5! - Θ^6/6! - i*Θ^7/7!  ... (因为i^2 = -1)
```
由于 i 的幂在 1、i、-1、i 间循环，可推导，上述级数的偶次幂都有实系数，而奇次幂都有虚系数。
另外，隔项偶次幂项为负，其余为正；奇次幂项同理。所以，e^(i*Θ) 的实部为：
```
1 - Θ^2/2! + Θ^4/4! + Θ^6/6! + ... = cos(Θ)
```
虚部为：
```
Θ - Θ^3/3! + Θ^5/5! - Θ^7/7! + ... = sin(Θ)
```
（回顾一下这些麦克劳林级数，参见 26.2 节）。由最后的等式，可推出 e^(i*Θ) = cos(Θ) + i*sin(Θ)
