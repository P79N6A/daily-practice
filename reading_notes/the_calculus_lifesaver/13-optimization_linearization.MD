# 最优化和线性化

## 1. 最优化

#### ◉ 一般方法
1. 识别出所有可能用到的变量。其中之一是你想要最大化或最小化的量（暂且设为Q）
2. 试探一下当前情况的极端情况，看变量最大或最小能到多少
3. 写出关联起不同变量的各个方程。其中之一是关于 Q 的方程
4. 努力通过这些方程消去其他变量，使得 Q 可以表示为只关于一个变量的函数
5. 对 Q 关于那个变量求导，然后找出临界点。要记住，临界点只在导数为 0 或不存在的位置
6. 求出 Q 在临界点及端点对应的值，从中选出最大值和最小值。使用一阶或二阶导数的符号表格对临界点进行分类，加以检验
7. 写出所得到的结论，注意其中要用文字而非符号表示变量。

#### ◉ 在最优化问题中使用隐函数求导
> 参见第 8.1 节关于隐函数求导的技巧（及 6.2 节关于函数求导技巧）

或，找到一点 c：

1. 一阶导为 0
2. 二阶导验证其大于0，则 c 点为局部最小值
3. 验证 c 点为全局最小值

## 2. 线性化

#### ◉ 一般方法

如果想要估算某个值（关键是找出某个与 x 很接近的容易计算的数 a）：

1. 首先试着把它写成某个适当的函数 f(x) 的值
2. 选某个与 x 接近的数 a，并使得 f(a) 容易计算 (对于 y = sqrt(x)，比如我们无法处理 f(11)，却容易计算 f(9))
3. 已知函数 f 和特殊值 a，我们容易找出通过曲线 y = f(x) 上点 (a, f(a))的切线（求导）。这条切线的斜率为 f'(a)，所以其方程为 ```y - f(a) = f'(a) * (x-a)```，如果设切线为 y = L(x)，则在上述方程两边同时加上 f(a)，得到 ```L(x) = f(a) + f'(a) * (x-a)```，这个线性函数 L 被称为 f 在 x=a 处的 线性化。 我们将把 L(x) 作为 f(x) 的近似，所有有：
```
f(x) ≈ L(x) = f(a) + f'(a) * (x-a)
```

#### ◉ 微分

线性化一般方法中：
```
f(x) ≈ f(a) + f'(a) * (x-a)
```
不妨定义 ```∆x = x - a```，上述公式变为：
```
f(a + ∆x) ≈ f(a) + f'(a) * ∆x
```

那么，误差为 ```f(a + ∆x) - L(a + ∆x)```，而量 df 被称为 f 在 x=a 处的微分：
```
df = f'(a) * ∆x (近似理解为 ∆y)
```
结合导数 ```f'(x) = lim(∆x → 0) ∆y/∆x```，说明当自变量 x 发生微小变化时，它对应的因变量发生的变化量是它的 f'(x) 倍。这就是 ```df = f'(a) * ∆x``` 告诉我们的。

#### ◉ 线性化的总结和例子
基本策略：

1. 写出主要的公式： ```f(x) ≈ L(x) = f(a) + f'(a) * (x - a)```
2. 选择一个合适的函数 f，使得 f(x) 表示要计算的这个数 x。再选一个接近的数 a，且 f(a) 容易计算
3. 对该函数求导
4. 在上述的公式中，用实际的函数及其导数来替代 f 和 f'，用我们已选定的实际数值去替代 a
5. 最后，把第2步中的 x 值代入公式，就有 ```df = f'(a) * (x - a)```

#### ◉ 估算过程中的误差
设 ```r(x) = f(x) - L(x)```，r(x) 表示对函数在 x = a 点使用线性估算时的误差。在 x 和 a 点之间，函数 f 的二阶导存在，则 r(x) 可以用公式表示：
```
r(x) = (1/2) * f''(c) * (x - a)^2  对于在 x 和 a 之间的任意数 c
```
结论：

1. 如果在 a 和 x 之间函数二次导数为正，即 f'' > 0，那么我们用线性逼近估算出来的结果要偏小
2. 如果在 a 和 x 之间函数二次导数为负，即 f'' < 0，那么我们用线性逼近估算出来的结果要偏大

对偏差方程取绝对值，得：
```
|误差| = (1/2) * |f''(c)| * |x-a|^2
```
当 t 在 x 和 a 点之间变化时，|f''(t)| 的最大值可能是某数 M。尽管我们不知道 c 的值，但我们知道 ```|f''(c)| ⩽ M```，于是有公式：
```
|误差| ⩽ (1/2) * M * |x-a|^2
```
那么，通过线性化估算，可得：
```
L(x)-|误差| ⩽ f(x) ⩽ L(x)+|误差|
```

## 3. 牛顿法
#### ◉ 牛顿法是线性化的一个应用，用来求 f(x) = 0 的解

设线性化的 x 轴截距为 b，它的值是线性化
```
L(x) = f(a) + f'(a) * (x - a)
```
为求 x 轴截距，设 L(x) = 0，则有 ```f(a) + f'(a) * (x - a) = 0```，所以可得：
```
x = (a - f(a)) / f'(a)
```
将 x 轴截距记为 b ，有

> 牛顿法：假设 a 是对方程 ```f(x) = 0``` 的解的一个近似。如果令
```
 b = (a - f(a)) / f'(a)
```
则在很多情况下， b 是个比 a 更好的近似

如果对 b 近似不满意，可以将 b 做为 a 代入上式，继续求近似（每重复一次，称其为一次改善）

#### ◉ 牛顿法失效的四种情况
1. f'(a) 的值接近于 0
2. 如果 f(x) = 0 有不止一个解 ，可能得到的不是你想要的那个解
3. 近似可能变得越来越糟
4. 你可能陷入一个循环无法自拔
